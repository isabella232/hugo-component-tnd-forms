{{/* 
	Print a form using passed parameter as data/forms/{filename}
	
	@author The New Dynamic
	
	@access private

	@context string 
*/}}
{{ $form := false }}
{{ range site.Data.forms }}
	{{ if eq .id $ }}
		{{ $form = . }}
	{{ end }}
{{ end }}
{{ with $form }}
	{{ $provider := partialCached "tnd-forms/func/GetProvider" . "tnd_form_provider" }}
	{{ $netlify := true }}
	<form 
		{{ partial "tnd-forms/providers/partial.html" (dict "partial" "action.html" "context" .) | safeHTMLAttr }}
		method="POST"
		accept-charset="UTF-8"
		{{ partial "tnd-forms/providers/partial.html" (dict "partial" "name.html" "context" .) | safeHTMLAttr }}
		{{/* If the form needs to use a script, it should leave as an entry
		in the formScripts object of /assets/js/forms.js */}}
		{{ with .js_use }}
		data-js-use="{{ . }}"
		{{ end }}
		{{ $provider }}
		{{/* If captcha is set to false, we default to Netlify's honeypot */}}
		{{ partial "tnd-forms/providers/partial.html" (dict "partial" "honeypot.html" "context" .) | safeHTMLAttr }}
		class="{{ site.Params.tnd_forms.css.form }}"
	>
		{{/* We look for the form fields in data. */}}
		{{ with .fields }}
			{{ range . }}
				{{/* We load the input partial which will handle specicif input type markup */}}
				{{ partial "tnd-forms/input" . }}
			{{ end }}
		{{ end }}
		{{/* CAPTCHA */}}
		{{ partial "tnd-forms/providers/partial.html" (dict "partial" "captcha.html" "context" .) }}
		{{ partial "tnd-forms/providers/partial.html" (dict "partial" "subject.html" "context" .) }}
		{{ partial "tnd-forms/providers/partial.html" (dict "partial" "redirect.html" "context" .) }}
		<button class="{{ site.Params.tnd_forms.css.submit }}" type="submit">
 			{{ default "Submit" .submit }}
  	</button>
	</form>
{{ else }}
{{/* If ID passed to shortcode does not match any existing form in data file: */}}
<p>
	We could not find data for the form "{{ . }}"
</p>
{{ end }}
